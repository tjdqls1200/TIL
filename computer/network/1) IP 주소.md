### 1. IP 란?

네트워크 환경에서 **컴퓨터(노드) 간 통신**하기 위해 각 컴퓨터에 부여된 **네트워크 주소**.

#### 1) IP 주소 구분

IP 통신에 필요한 고유 주소로 **IPv4, IPv6** 두 가지 체계 사용
- **IPv4 :** 32bit 주소 체계, 8bit씩(= 옥테드) 끊어 0 ~ 255의 10진수 숫자로 표현, 각 옥테드는 dot으로 구분. 
- **IPv6 :** 128bit 주소 체계, IPv4 의 부족으로 IPv6 의 사용이 점차 확대



#### 2) 사용 범위에 따른 구분 (공인 IP 주소, 가상 IP 주소)

- **공인 IP 주소 (public IP)**

  - **공인기관에서 인증한 공개형 IP주소** 

  - 외부에 공개되어 있어 이 **IP 주소를 통해 호스트 간 직접적으로 통신할 수 있게 된다.** 

  - 공인 IP주소를 사용하려면 보안 장비가 필요하다.

    

- **가상 IP 주소 (private IP)**
  - **외부에 공개되지 않은 패쇄형 IP 주소** 
  - **이 IP 주소만으로는 외부에서 직접적으로 통신할 수가 없다.** 
  - 가상 IP주소는 주소 대역이 3개로 고정되어 있다. 
    - 192.168.xxx.xxx, 172.10.xxx.xxx, 10.xxx.xxx.xxx 
  - 주로 인터넷 유무선 공유기(DHCP)에 주로 사용
    - 하나의 공인 IP주소를 공유하여 여러 대의 컴퓨터가 인터넷에 접속하려면 가상 IP 주소가 필요하기 때문

- ex) 공유기의 공인 IP 주소가 123.123.123.123이고, 공유기를 통해 연결되는 컴퓨터는 공유기가 제공하는 가상 IP주소인 192.168.xxx.xxx인 IP 주소를 가지고 네트워크에 접속 하 수 있다.
  - 위와 같이 가상 IP를 사용하는 이유 -> IP주소를 공유하여 **IPv4 체계의 IP 리소스 문제를 해결**하고 **보안 문제도 해결**할 수 있다.

#### 3) 할당 방식에 따른 구분 (고정 IP 주소, 유동 IP 주소)

- **고정 IP 주소** 

  - 컴퓨터에 명시적으로 고정 IP주소를 설정하여 사용
  - 공인 IP는 인터넷 서비스 업체, 가상 IP 주소는 인터넷 공유기가 할당

  

- **유동 IP 주소 (DHCP방식, Dynamic Host Configuration Protocol)**
  - IP 주소를 할당하는 **특정 서버가 보내 주는 IP 주소 그대로 컴퓨터에 자동 할당되는 방식**으로 컴퓨터가 많은 환경에서 간편하고 유용하다.
  - **1) 컴퓨터가 DHCP 서버에 IP 주소 할당을 요청**하고, 이를 수신한 **2) DHCP 서버가 해당 컴퓨터에 IP 주소 등의 네트워크 정보를 전달**하면 **3) 컴퓨터에서는 이를 자동으로 등록**  
  - 인터넷 공유기는 가상 IP 주소를 생성(NAT 서비스)하여 각 컴퓨터 등에게 자동 할당(DHCP 서비스)하는 역할을 동시에 수행한다.



### 2. IP 클래스

**하나의 IP 주소에서 네트워크 영역과 호스트 영역을 나누는 방법**으로 네트워크의 규모에 따라 결정



- **네트워크 주소는 특정 네트워크의 주소**이고 라우팅 시 사용, **호스트 주소는 네트워크에 속한 호스트의 주소**

- 하나의 네트워크에서 **몇 개의 호스트 IP를 가질 수 있느냐**에 따라 클래스가 결정된다.

  ex)  203 . 0 . 113 . 43 (네트워크 주소 : 203 . 0 . 113 | 호스트 주소 : 43)

- 하나의 네트워크란(=하나의 브로드캐스트) 라우터를 거치지 않고도 통신이 가능한 영역으로 같은 네트워크 주소, 다른 호스트 주소의 경우를 말한다. (= 같은 Network ID)

- 고정구간으로 낭비가 많아 후에 **CIDR (Classless Inter-Domain Routing)** 로 변경.

  **CIDR :** 클래스 없는 도메인 간 라우팅 기법으로 IPv4 주소를 좀 더 효율적으로 사용 가능

  네트워크 주소 뒤를 / 로 구분하고 subnet-mask의 bit 수를 적어 표시한다. (192 . 168 . 1 . 0 / 26)

![image-20200726223343824](/Users/sungblee/Library/Application Support/typora-user-images/image-20200726223343824.png)

**1) 클래스 A :** 대규모 네트워크 환경에 쓰이며, IP 주소 4마디 중 첫 번째 마디의 숫자가 0~127(약 1600만 개 IP 주소 사용 가능)까지 사용 가능

**2) 클래스 B :** 중규모 네트워크 환경용으로 128~191(약 6만 5천개 IP 주소 사용 가능)까지 사용 가능

**3) 클래스 C :** 소규모 네트워크 환경에 적용되는 것으로 192~223(254개 IP 주소 사용 가능)까지 사용 가능

**4) 클래스 D :**는 멀티캐스트용 **E**는 연구/개발용 IP주소 혹은 미래에 사용하기 위해 남겨놓은 클래스



**Private IP address**

- Class A: 10.0.0.0 ~ 10.255.255.255
- Class B: 172.16.0.0 ~ 172.31.255.255
- Class C: 192.168.0.0 ~ 192.168.255.255



**IP 클래스의 단점**

- IPv4는 초기에 클래스로 나누어 할당하는 방법을 이용했으나 IP의 낭비가 심했고 이를 해결하기 위해 추후에 네트워크 장치 수에 따라 효율적으로 사용할 수 있는 **서브넷(Subnet)**이 등장.



### 3. Netmask

IP 주소에서 사용되는 **네트워크 주소와 호스트 주소를 구분하**는 비트마스크



- IP 주소 중 **네트워크 주소 부분의 bit 를 1로 채워 넣어 나열**. (255 . 255 . 255. 0)

- IP 주소와 netmask 를 AND 연산하면 네트워크 주소를 얻을 수 있음

- **네트워크 안에 있는 모든 호스트에게 데이터를 전송**할 때 사용



### 4. Subnet

IP 주소의 효율성을 위하여 **네트워크 영역을 부분적으로 나눈 부분망**(네트워크 세분화)

네트워크 안의 서브넷을 나누는 역할은 라우터라는 물리적 장치가 담당 (공인 IP 주소를 할당받은 장치)



**1) 서브넷 마스크 (Subnet-mask)** 

- Subnet으로 나누기 위해 쓰이는 비트마스크로 IP주소와 AND연산하여 Network 부분의 정보를 걸러낸다.
- 이렇게 걸러진 부분이 Network ID가 되고 나머지는 Host를 식별하는 Host ID가 된다.
- 1과 0으로 이루어져 있으며, 1과 0은 연속으로 나온다. (1은 Network ID, 0은 Host ID)
- 한 Bit씩 서브넷 마스크에 추가할 때마다 네트워크의 크기는 2배 증가,  호스트의 수는 1/2배로 감소



**2) 서브네팅 (Subnetting)**

- **하나의 네트워크를 여러 개의 subnet 으로 분할**하는 과정

- IP 클래스에 의해 분리된 Network Prefix와 Host Number에서 Host Number 영역을 다시 서브네팅 과정을 통해 **Subnet Number와 Host Number로 분리**

- **각 Network ID에서 첫번째 주소는 Network Address로 쓰이고 마지막 주소는 Boardcast**로 쓰이므로 첫번째 주소와 마지막 주소는 호스트에 할당

  (Broadcast : 네트워크에 연결된 모든 호스트에 데이터를 전송하는 방식으로 해당 브로드캐스트 주소를 사용하여 해당 주소 범위에 있는 전체 호스트에 트래픽을 전달)



출처: https://engkimbs.tistory.com