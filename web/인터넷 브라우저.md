### 인터넷 브라우저의 동작 원리

###  

#### 1. 브라우저의 주요 기능

- 사용자가 선택한 자원을 서버에 요청, 브라우저에 표시
- 자원은 html, pdf, image 등 다양한 형태 (자원의 주소는 URL에 의해 정해짐)
- 브라우저는 html 과 css 명세에 따라 html 파일을 해석해서 표시 (명세는 웹 표준화 기구 W3C 에서 정해짐)



#### 2. 브라우저의 기본 구조

<img src="/Users/sungblee/Library/Application Support/typora-user-images/image-20200804220732432.png" alt="image-20200804220732432" style="zoom:50%;" />

- **사용자 인터페이스 :** 사용자가 활용하는 서비스들

- **브라우저 엔진 :** 사용자 인터페이스와 렌더링 엔진 사이 동작 제어

- **렌더링 엔진 :** html, xml 문서와 같은 이미지를 표시 (플러그인, 브라우저 확장 기능으로 다른 유형도 표시 가능, 팝업창)

- **UI 백엔드 :** 플랫폼에서 명시하지 않은 일반적 인터페이스 (콤보 박스 같은 기본 장치를 그림)

- **자료 저장소 :** 쿠키 등 모든 종류의 자원을 하드 디스크에 저장

  

#### 3. 렌더링 동작 과정 (= 웹킷 동작 구조)

​	**웹킷** : 리눅스 플랫폼에 동작하기 위한 최초 렌더링 엔진 (크롬, 사파리 사용)

1. **html 문서를 파싱**, 콘테츠 트리 내부에서 태그를 모두 DOM 노드로 변환(-> **DOM 트리 구축**)
2. 외부 **CSS 파일**과 함께 포함된 **스타일 요소를 파싱**
3. **어태치먼트** (DOM 노드와 스타일 정보를 연결) -> **렌더 트리 생성** (문서가 시각적 요소를 포함한 형태로 변경)
4. 렌더 트리는 정해진 순서대로 화면에 배치 (**렌더 트리 배치**가 진행되면서 노드가 화면에 표시됨)
5. UI 백엔드에서 렌더 트리의 각 노드를 돌면서 **렌더 트리 그리기** 과정 진행
6. 모든 html 을 파싱할 때까지 기다리지 않고 배치와 그리기 과정을 동시에 시작
7. 전송을 받고 기다리는 동시에 받은 내용을 화면에 출력 (웹이 점차적으로 화면에 나오는 이유)



#### 4.  DOM (Document Object Model, 문서 객체 모델) 

- 웹 브라우저가 **html 페이지를 인식**하는 방식 (트리 구조)
- '<html>, <body>' 와 같은 태그들을 javascript 가 활용할 수 있는 개체로 만들면 **문서 객체**가 된다.



#### 5. 파싱과 DOM 트리

문서 파싱(parsing) : 브라우저가 코드를 이해하고 사용할 수 있는 구조로 변환하는 것

- 어휘 분석기를 통해 언어의 구문 규칙에 따라 문서 구조를 분석하여 **파싱 트리를 구축**(파서 생성기)
- 파싱 과정을 거쳐 서버로부터 받은 문서를 브라우저가 이해할 수 있게 **DOM 트리 구조로 변환**시켜 주는 것.



## 요약 (브라우저의 동작 원리)

1. 주소창 **url 입력 후 엔터, 서버에 요청** 전송
2. 해당 페이지의 여러 **자원(text, image 등) 전송**
3. 브라우저는 해당 자원이 담긴 html 과 css 를 **W3C 명세에 따라 해석** (렌더링 엔진)
4. **1) html 파싱, DOM 트리 구축 | 2) css 파싱, 스타일 구조체 생성**
5. DOM 트리와 스타일 정보를 **어태치먼트시켜 렌더 트리 생성**
6. **화면에 배치,  UI 백엔드가 노드를 돌며** 형상을 그림
7. 빠른 브라우저 화면 표시를 위해 **자원을 전송 받으며 동시에 화면에 표시** 진행
