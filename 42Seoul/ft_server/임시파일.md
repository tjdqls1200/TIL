# 순서도



apt update : 현재 컨테이너 안에 있는 패키지 List를 update (apt : Advanced Packaging Tool)

(dpkg -l : 패키지 List 확인)

apt install : 패키지가 이미 있을 때

apt-get install : 패키지가 없을 때

service [패키지명] [동작] : 패키지 실행 명령



nginx 서버를 다운받은 후 php 7.2-fpm 을 연동하기 위해 환경변수를 설정해줘야 함 

​	1) nginx 와 php를 연동하기 위한 파일 수정

​		/etc/nginx/sites-available/default

​		- root 위치 설정 (index root directory)

​		- index에 index.php 추가(명시된 index 파일들 자동적으로 먼저 실행해줌)

​	2) php 환경설정 파일 수정 

​		/etc/php/7.2/fpm/php.ini

​		/etcphp/7.2/cli/php.ini

​		1) short open tag off -> on : php 구분인식

​		2) cgi.fix_pathinfo 1 -> 0 () : php가 백지로 출력될 때 이 부분을 수정

service nginx reload. (default 파일 수정 후 재실행을 해줘야 적용이 됨)

service php7.2-fpm start(-> Sock 파일 생성 됨, Sock 파일이 있어야 php 실행 가능)

 







1. debian:buster 운영체제(OS) 설치
   - docker run -it -p 8000:80 debian:buster /bin/bash
   - apt update && apt upgrade (apt update : 현재 컨테이너 안에 있는 패키지 List를 update (apt : Advanced Packaging Tool)

2. Nginx 서버 설치
   - apt-get -y install nginx

3. php 설치
   - apt-get -y install php
4. Nginx & php 연동
   - apt-get install openssl vim
   - etc/nginx/sites-available/default 설정 변경
   - var/www/html/phpinfo.php 파일 생성

```php
#phpinfo.php file
<?php phpinfo() ?>
```

5. MaraDB 설치

   - apt install mariadb-server php-mysql
   - service mysql start
   - mysql -u root -p (u:user, p:password)

6. phpmyadmin 설치

   - apt-get -y install phpmyadmin (X)

     - debian:buster 에서는 phpmyadmin을 install 할 수 없다.

   - apt-get install -y wget 설치 (웹에서 phpmyadmin을 get 하기 위해 사용)

     - GNU Wget(WWW + get) : 웹 서버로부터 콘텐츠를 가져오는 컴퓨터 프로그램으로, GNU 프로젝트의 일부이다. HTTP, HTTPS, FTP 프로토콜을 통해 내려받기를 지원한다.

   - wget https://files.phpmyadmin.net/phpMyAdmin/5.0.2/phpMyAdmin-5.0.2-all-languages.tar.gz (압축 파일을 내려 받음)

   - tar -xvf phpMyAdmin-5.0.2-all-languages.tar.gz (압축 파일 해제)

   - mv phpMyAdmin-5.0.2-all-languages phpmyadmin

   - mv phpmyadmin /var/www/html/ 

   - blowfish password를 http://www.passwordtool.hu/blowfish-password-hash-generator 에서 generate 받아 입력

   - ```
     #config.sample.inc.php -> config.inc.php 로 복사
     cp -rp var/www/html/phpmyadmin/config.sample.inc.php var/www/html/phpmyadmin/config.inc.php
     
     
     vim var/www/html/phpmyadmin/config.inc.php
     
     -> $cfg['blowfish_secret'] = 'Blowfish Password(Generate 받은 키)';
     ```

   - ```
     # Nginx & php & mysql 다시 셋팅
     service nginx reload
     service mysql start
     service php7.3-fpm restart
     
     mysql < var/www/html/phpmyadmin/sql/create_tables.sql -u root --skip-password
     
     mysqladmin -u root -p password
     기존 패스워드 없으니 엔터 입력 
     새 패스워드 입력
     한 번 더 입력
     
     
     show databases;
     
     CREATE DATABASE IF NOT EXISTS wordpress; // 워드프레스를 위한 DB 만들기
     Grant all privileges on *.* to ‘user’@‘%’ identified by ‘설정한비밀번호’ with grant option;
     flush privileges;
     show databases;
     exit
     ```

     





[도움] https://42kchoi.tistory.com/161?category=888384

[도움] https://yeosong1.github.io/ftserver-